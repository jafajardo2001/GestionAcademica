{% extends "dbs_docente.html" %}
{% block content %}
<div class="d-flex" id="wrapper">
    <div class="container-fluid">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb p-3 bg-body-tertiary rounded-3">
                <li class="breadcrumb-item">
                    <a class="link-body-emphasis" href="{% url 'docente:docente' %}">
                      <span class="material-symbols-outlined"> home </span>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a class="link-body-emphasis fw-semibold text-decoration-none" href="{% url 'docente:tareas' %}">
                        <span class="material-symbols-outlined">
                        task
                        </span>
                    </a>
                </li>
            </ol>
        </nav>
        
        <div class="row align-items-md-stretch">
            <div class="col-md-6 w-100">
                <div class="p-5 text-bg-dark rounded-3 text-center">
                    <h4>Crear Nueva Tarea</h4>
                    <form method="POST" action="{% url 'docente:tareas' %}">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="nombre_tarea" class="form-label">Nombre de la Tarea</label>
                            <input type="text" class="form-control" id="nombre_tarea" name="nombre_tarea" required>
                        </div>
                        <div class="mb-3">
                            <label for="descripcion_tarea" class="form-label">Descripción</label>
                            <textarea class="form-control" id="descripcion_tarea" name="descripcion_tarea" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="paralelo" class="form-label">Paralelo</label>
                            <select class="form-select" id="paralelo" name="paralelo" required>
                                <option value="">Selecciona un paralelo</option>
                                {% for paralelo in paralelos %}
                                <option value="{{ paralelo.id }}">{{ paralelo.nombre_cursos }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <button type="submit" name="crear" class="btn btn-primary">Crear Tarea</button>
                    </form>
                    {% if msg1 %}
                    <div class="alert alert-success mt-3" role="alert">
                        {{ msg1 }}
                    </div>
                    {% endif %}
                    {% if msg %}
                    <div class="alert alert-danger mt-3" role="alert">
                        {{ msg }}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <hr>
        
        <div class="row align-items-md-stretch">
            <div class="col-md-12 w-100">
                <div class="p-5 text-bg-dark rounded-3 text-center">
                    <h4>Tareas Asignadas</h4>
                    <table class="small table accordion table-bordered rounded">
                        <thead class="text-white text-center" style="background:#274386">
                            <tr class="align-middle">
                                <th class="fz-1">Nombre de la Tarea</th>
                                <th class="fz-1">Descripción</th>
                                <th class="fz-1">Paralelo</th>
                                <th class="fz-1">Acciones</th>
                            </tr>
                        </thead>
                        <tbody class="fs-6s">
                            {% for tarea in datosTareas %}
                            <tr>
                                <td>{{ tarea.nombre_tarea }}</td>
                                <td>{{ tarea.descripcion_tarea }}</td>
                                <td>{{ tarea.paralelo.nombre_cursos }}</td>
                                <td>
                                    <form method="POST" action="{% url 'docente:tareas' %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="eliminar" value="{{ tarea.id }}">
                                        <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                                    </form>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">No hay tareas asignadas.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
